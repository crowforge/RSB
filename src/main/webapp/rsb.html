<!--
    R Service Bus
    
    Copyright (c) Copyright of OpenAnalytics BVBA, 2010-2011
 
    ===========================================================================
 
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
 
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.
 
    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>
        
    @author rsb.development@openanalytics.eu
-->
<html>
  <head>
  	<title>RSB - R Service Bus</title>
    <script type="text/javascript" src="js/date.js"></script> 
  	<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script> 
    <script type="text/javascript" src="js/jquery.validate-1.7.min.js"></script>
    <script type="text/javascript" src="js/jquery.form-2.43.js"></script>
    <script type="text/javascript" src="js/jquery.ba-dotimeout.min.js"></script>
    <script type="text/javascript" src="js/jquery.MultiFile-1.47.pack.js"></script>
    
    <script type="text/javascript" src="js/jquery-ui-1.8.custom.min.js"></script>
    <link type="text/css" href="css/jquery-ui-1.8.custom.css" rel="stylesheet" />

    <script type="text/javascript" src="js/ui.panel.min.js"></script>
    <link type="text/css" href="css/ui.panel.css" rel="stylesheet" />
    
  	<script type="text/javascript" src="js/rsb.js"></script>
    <link type="text/css" href="css/rsb.css" rel="stylesheet" />
  </head>
  <body>
    <div class="box">
      <h1><img src="css/images/open_analytics_logo.jpg" style="vertical-align:middle;" title="Open Analytics" />&nbsp;RSB - R Service Bus</h1>
      
      <div class="container">
        <form id="jobUploadForm" name="jobUploadForm" action="/api/jobs" method="POST" enctype="multipart/form-data"> 
          <p>
            <label>Application:</label><input id="applicationName" type="text" name="X-RSB-Application-Name" class="required" />
            <button id="applicationResultsButton" type="button">Get Results</button>
          </p>
          <div id="requiredParamsPanel" class="centralPanel">
            <h4>Job Submission</h4>
            <div>
              <p><label>Job file(s):</label><input id="jobFileSelector" type="file" name="X-RSB-JobFile[]" class="required multi {namePattern:'$name$i'}" /></p>
              
              <div id="optionalParamsPanel" class="centralPanel">
                <h4>Optional Parameters</h4>
                <div>
                  <p><label>R Script: </label><input type="text" name="X-RSB-Meta-rScript" /></p>
                  <p><label>Sweave File: </label><input type="text" name="X-RSB-Meta-sweaveFile" /></p>
                </div>
              </div>
              
              <input type="submit" name="jobSubmitButton" value="Upload Job" /> 
            </div>
          </div>
        </form>
        
        <br/>
        
        <div id="runningJobsPanel" class="centralPanel">
          <h4>Running Jobs</h4>
          <div>
            <table id="runningJobsTable" cellspacing="1" >
              <thead>
                <tr>
                  <th>Application</th>
                  <th>Date Time</th>
                  <th>Job Id</th>
                </tr>
              </thead>
              <tbody id="runningJobsTableBody">
              </tbody>
            </table>
          </div>
        </div>
        
        <div id="resultsPanel" class="centralPanel">
          <h4>Results</h4>
          <div>
            <table id="resultsTable" cellspacing="1" >
              <thead>
                <tr>
                  <th>Application</th>
                  <th>Date Time</th>
                  <th>Job Id</th>
                  <th>Result Type</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="resultsTableBody">
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </body>
</html>